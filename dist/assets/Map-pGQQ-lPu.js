import{r as o,R as g,a as D,l as y,j as d,L as b}from"./application-Cl2UwBmw.js";function h(t,n){const e=o.useRef(n);o.useEffect(function(){n!==e.current&&t.attributionControl!=null&&(e.current!=null&&t.attributionControl.removeAttribution(e.current),n!=null&&t.attributionControl.addAttribution(n)),e.current=n},[t,n])}const S=1;function _(t){return Object.freeze({__version:S,map:t})}function N(t,n){return Object.freeze({...t,...n})}const R=o.createContext(null),x=R.Provider;function w(){const t=o.useContext(R);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function U(t){function n(e,r){const{instance:u,context:a}=t(e).current;return o.useImperativeHandle(r,()=>u),e.children==null?null:g.createElement(x,{value:a},e.children)}return o.forwardRef(n)}function k(t){function n(e,r){const[u,a]=o.useState(!1),{instance:c}=t(e,a).current;o.useImperativeHandle(r,()=>c),o.useEffect(function(){u&&c.update()},[c,u,e.children]);const l=c._contentNode;return l?D.createPortal(e.children,l):null}return o.forwardRef(n)}function A(t){function n(e,r){const{instance:u}=t(e).current;return o.useImperativeHandle(r,()=>u),null}return o.forwardRef(n)}function I(t,n){const e=o.useRef();o.useEffect(function(){return n!=null&&t.instance.on(n),e.current=n,function(){e.current!=null&&t.instance.off(e.current),e.current=null}},[t,n])}function v(t,n){const e=t.pane??n.pane;return e?{...t,pane:e}:t}function F(t,n){return function(r,u){const a=w(),c=t(v(r,a),a);return h(a.map,r.attribution),I(c.current,r.eventHandlers),n(c.current,a,r,u),c}}function C(t,n,e){return Object.freeze({instance:t,context:n,container:e})}function O(t,n){return n==null?function(r,u){const a=o.useRef();return a.current||(a.current=t(r,u)),a}:function(r,u){const a=o.useRef();a.current||(a.current=t(r,u));const c=o.useRef(r),{instance:l}=a.current;return o.useEffect(function(){c.current!==r&&(n(l,r,c.current),c.current=r)},[l,r,u]),a}}function V(t,n){o.useEffect(function(){return(n.layerContainer??n.map).addLayer(t.instance),function(){var a;(a=n.layerContainer)==null||a.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}function j(t){return function(e){const r=w(),u=t(v(e,r),r);return h(r.map,e.attribution),I(u.current,e.eventHandlers),V(u.current,r),u}}function Z(t,n){const e=O(t,n),r=j(e);return U(r)}function B(t,n){const e=O(t),r=F(e,n);return k(r)}function G(t,n){const e=O(t,n),r=j(e);return A(r)}function X(t,n,e){const{opacity:r,zIndex:u}=n;r!=null&&r!==e.opacity&&t.setOpacity(r),u!=null&&u!==e.zIndex&&t.setZIndex(u)}function L(){return L=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},L.apply(this,arguments)}function q({bounds:t,boundsOptions:n,center:e,children:r,className:u,id:a,placeholder:c,style:l,whenReady:f,zoom:s,...p},M){const[z]=o.useState({className:u,id:a,style:l}),[i,H]=o.useState(null);o.useImperativeHandle(M,()=>(i==null?void 0:i.map)??null,[i]);const P=o.useCallback(E=>{if(E!==null&&i===null){const m=new y.Map(E,p);e!=null&&s!=null?m.setView(e,s):t!=null&&m.fitBounds(t,n),f!=null&&m.whenReady(f),H(_(m))}},[]);o.useEffect(()=>()=>{i==null||i.map.remove()},[i]);const T=i?g.createElement(x,{value:i},r):c??null;return g.createElement("div",L({},z,{ref:P}),T)}const J=o.forwardRef(q),K=Z(function({position:n,...e},r){const u=new y.Marker(n,e);return C(u,N(r,{overlayContainer:u}))},function(n,e,r){e.position!==r.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==r.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==r.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==r.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==r.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),Q=B(function(n,e){const r=new y.Popup(n,e.overlayContainer);return C(r,e)},function(n,e,{position:r},u){o.useEffect(function(){const{instance:c}=n;function l(s){s.popup===c&&(c.update(),u(!0))}function f(s){s.popup===c&&u(!1)}return e.map.on({popupopen:l,popupclose:f}),e.overlayContainer==null?(r!=null&&c.setLatLng(r),c.openOn(e.map)):e.overlayContainer.bindPopup(c),function(){var p;e.map.off({popupopen:l,popupclose:f}),(p=e.overlayContainer)==null||p.unbindPopup(),e.map.removeLayer(c)}},[n,e,u,r])}),W=G(function({url:n,...e},r){const u=new y.TileLayer(n,v(e,r));return C(u,r)},function(n,e,r){X(n,e,r);const{url:u}=e;u!=null&&u!==r.url&&n.setUrl(u)});delete b.Icon.Default.prototype._getIconUrl;b.Icon.Default.mergeOptions({iconRetinaUrl:"/assets/marker-icon-2x.png",iconUrl:"/assets/marker-icon.png",shadowUrl:"/assets/marker-shadow.png"});const $=({locations:t})=>{console.log("Received locations:",t);const n=(t==null?void 0:t.filter(u=>typeof u.latitude=="number"&&typeof u.longitude=="number"))||[],e=n[0]||[51.505,-.09],r=n.length?10:3;return d.jsxs(J,{center:e,zoom:r,style:{height:"100%",width:"100%"},children:[d.jsx(W,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),n.map(u=>d.jsx(K,{position:[u.latitude,u.longitude],children:d.jsxs(Q,{children:[d.jsx("strong",{children:u.name}),d.jsx("br",{}),"Lat: ",u.latitude.toFixed(4),", Lng: ",u.longitude.toFixed(4)]})},u.id))]})};export{$ as default};
